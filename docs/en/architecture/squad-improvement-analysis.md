# Project Analysis: Squad Improvement System

**Generated:** 2025-12-26
**Generated By:** @architect (Aria)
**Feature:** Squad Analysis & Continuous Improvement Tasks
**Story:** TBD (Proposed: SQS-11)

---

## Project Structure

| Aspect | Value |
|--------|-------|
| Framework | AIOS-FullStack |
| Primary Language | TypeScript/JavaScript |
| Squad System | v2.1 (Task-First Architecture) |
| Existing Tasks | 8 squad-creator tasks |
| Testing Framework | Jest |

---

## Current Squad Creator Inventory

### Agent Definition

| Property | Value |
|----------|-------|
| **Agent ID** | squad-creator |
| **Name** | Craft |
| **Title** | Squad Creator |
| **Icon** | ðŸ—ï¸ |
| **File** | `.aios-core/development/agents/squad-creator.md` |

### Existing Tasks

| Task | File | Status | Purpose |
|------|------|--------|---------|
| `*design-squad` | squad-creator-design.md | âœ… Done | Design from documentation |
| `*create-squad` | squad-creator-create.md | âœ… Done | Create new squad |
| `*validate-squad` | squad-creator-validate.md | âœ… Done | Validate structure |
| `*list-squads` | squad-creator-list.md | âœ… Done | List local squads |
| `*migrate-squad` | squad-creator-migrate.md | âœ… Done | Migrate legacy format |
| `*download-squad` | squad-creator-download.md | â³ Placeholder | Download from registry |
| `*publish-squad` | squad-creator-publish.md | â³ Placeholder | Publish to aios-squads |
| `*sync-squad-synkra` | squad-creator-sync-synkra.md | â³ Placeholder | Sync to marketplace |

### Existing Scripts

| Script | File | Purpose |
|--------|------|---------|
| SquadLoader | squad-loader.js | Resolve and load manifests |
| SquadValidator | squad-validator.js | Validate against schema |
| SquadGenerator | squad-generator.js | Generate squad structure |
| SquadDesigner | squad-designer.js | Design from docs |
| SquadMigrator | squad-migrator.js | Migrate legacy format |
| SquadDownloader | squad-downloader.js | Download from registry |
| SquadPublisher | squad-publisher.js | Publish to aios-squads |

---

## Gap Analysis

### Current Workflow Coverage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SQUAD LIFECYCLE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. DESIGN       *design-squad            âœ… Covered            â”‚
â”‚       â†“                                                         â”‚
â”‚  2. CREATE       *create-squad            âœ… Covered            â”‚
â”‚       â†“                                                         â”‚
â”‚  3. VALIDATE     *validate-squad          âœ… Covered            â”‚
â”‚       â†“                                                         â”‚
â”‚  4. IMPROVE      ??? (MISSING)            âŒ GAP                â”‚
â”‚       â†“                                                         â”‚
â”‚  5. DISTRIBUTE   *publish-squad           â³ Placeholder        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Missing Capabilities

| Capability | Description | Impact |
|------------|-------------|--------|
| **Analyze Squad** | Scan existing squad, list components, identify opportunities | Cannot understand what a squad contains |
| **Add Components** | Add new agents/tasks/templates/tools incrementally | Must recreate squad to add components |
| **Modify Components** | Edit existing components | No guided workflow |
| **Remove Components** | Remove unused components | Manual cleanup required |
| **Story Integration** | Link improvements to official stories | No traceability |

### Squad Components (from schema)

| Component | Directory | Purpose | Can Be Added? |
|-----------|-----------|---------|---------------|
| tasks | tasks/ | Task definitions (task-first!) | âŒ No task |
| agents | agents/ | Agent personas | âŒ No task |
| workflows | workflows/ | Multi-step workflows | âŒ No task |
| checklists | checklists/ | Validation checklists | âŒ No task |
| templates | templates/ | Document templates | âŒ No task |
| tools | tools/ | Custom tools (.js) | âŒ No task |
| scripts | scripts/ | Automation scripts | âŒ No task |
| data | data/ | Static data files | âŒ No task |

---

## User Journey Analysis

### Current (Problematic)

```
User: "I want to add a new agent to my existing squad"

1. User manually creates agent file in agents/
2. User manually updates squad.yaml components.agents[]
3. User runs *validate-squad (might fail)
4. User manually fixes issues
5. No documentation of what was added
6. No link to any story
```

### Desired (With New Tasks)

```
User: "I want to add a new agent to my existing squad"

1. User runs *analyze-squad my-squad
   â†’ Shows current structure, components, suggestions

2. User runs *extend-squad my-squad
   â†’ Interactive: "What would you like to add?"
   â†’ Options: agent, task, template, tool, workflow, checklist, script, data
   â†’ Guided creation with templates
   â†’ Automatic squad.yaml update
   â†’ Automatic validation

3. Optionally links to story via --story SQS-XX flag
```

---

## Related Stories

| Story | Status | Relevance |
|-------|--------|-----------|
| SQS-4 | âœ… Done | Squad Creator Agent (base) |
| SQS-9 | âœ… Done | Squad Designer (design-squad) |
| SQS-10 | âœ… Done | Project Config Reference |
| **SQS-11** | ðŸ“‹ Proposed | Squad Analyze & Extend Tasks |

---

## Pattern Reference: analyze-project-structure.md

The existing `analyze-project-structure.md` task provides a good pattern:

1. **Elicitation** - Ask what feature to add
2. **Scan** - Scan project structure
3. **Pattern Analysis** - Identify existing patterns
4. **Recommendations** - Generate suggestions
5. **Output Documents** - Create analysis docs

This pattern can be adapted for squad analysis.

---

## Technical Patterns Detected

### Language Distribution
- **TypeScript:** Primary for scripts
- **JavaScript:** Squad tools and scripts
- **Markdown:** Agent/task definitions

### Testing
- **Framework:** Jest
- **Coverage:** >80% on core scripts
- **Location:** `tests/unit/squad/`

### Configuration
- **Schema:** JSON Schema validation
- **Manifest:** squad.yaml (YAML)
- **Inheritance:** extend/override/none

---

## Recommendations Summary

1. **Create `*analyze-squad` task** - Analyze existing squad structure
2. **Create `*extend-squad` task** - Add components incrementally
3. **Create `squad-analyzer.js` script** - Core analysis logic
4. **Create `squad-extender.js` script** - Extension logic
5. **Update squad-creator.md agent** - Add new commands
6. **Link to story system** - Optional --story flag

---

**Next Document:** [recommended-approach.md](./squad-improvement-recommended-approach.md)
